{"name":"Node-ftpsync","tagline":"Intelligent file syncronization over FTP","body":"An FTP synchronization app for NodeJS based on [jsftp](https://npmjs.org/package/jsftp). With an emphasis on speed and simplicity ftpsync aims to fulfull your one-click file deployment needs.\r\n\r\n[![NPM](https://nodei.co/npm/ftpsync.png)](https://nodei.co/npm/ftpsync/)\r\n\r\n\r\n**Notice: The core functionality to push files to a remote server is now fully implemented. Until the timestamp comparison logic is worked out, updates (ie overwriting files) are determined solely by comparing file sizes. This is not ftp-deploy. This application will delete files and directories on the remote server to match the local machine. Use this application in production at your own risk.**\r\n\r\nUsage\r\n----------------\r\n\r\n```js\r\n$ ftpsync --help\r\n\r\n Usage: ftpsync [options]\r\n\r\n Options:\r\n\r\n   -h, --help            output usage information\r\n   -V, --version         output the version number\r\n   -v, --verbose         Verbose logging\r\n   -l, --local []        Local root path\r\n   -r, --remote []       Remote root path\r\n   -h, --host []         FTP host name/address\r\n   -p, --port <>         FTP connection port\r\n   -u, --user []         FTP user name\r\n   -s, --pass []         FTP password\r\n   -c, --connections <>  Max number of concurrent FTP connections\r\n   -i, --ignore <items>  List of files to ignore (separated by commas)\r\n\r\n```\r\n\r\n*See [ftpsync.settings{}](#ftpsyncsettings) for detailed info about the settings.*\r\n\r\nUsing a config file\r\n--------------\r\n\r\nAs an alternative to the traditional command line interface a config file may also be used to load the settings.\r\n\r\n#### Step 1 - Create a configuration file\r\n\r\n*config.json*\r\n```js\r\n{\r\n  \"local\":\"~/www/\",\r\n  \"remote\":\"/\",\r\n  \"host\":\"example.com\",\r\n  \"port\":21,\r\n  \"user\":\"username\",\r\n  \"pass\":\"password\",\r\n  \"connections\":\"2\",\r\n  \"ignore\":[\r\n    \".htaccess\"\r\n  ]\r\n}\r\n```\r\n\r\n*See [ftpsync.settings{}](#ftpsyncsettings) for detailed info about the settings.*\r\n\r\n#### Step 2 - Place the config file in the directory where ftpsync will be exectued\r\n\r\n*By default ftpsync will use the configuration supplied buy a config.json file located in the CWD.*\r\n\r\n#### Step 3 - Run the script\r\n\r\n`ftpsync`\r\n\r\n#### Optional - Logging to a file\r\n\r\nTo log the output to a file simply pipe STDOUT to a log file.\r\n\r\n`ftpsync > ftpsync.log &`\r\n\r\nAPI\r\n----------------\r\n\r\n#### Declaring ftpsync\r\n  \r\nBasic usage example\r\n\r\n    var ftpSync = require('ftpsync');\r\n    \r\n    var options = {\r\n      host: 'localhost',\r\n      user: 'testuser',\r\n      pass: 'password',\r\n      local: '/your/local/directory',\r\n      remote: 'directoryname'\r\n    };\r\n    \r\n    ftpSunc.settings = options;\r\n    ftpSync.run(function(err, result) {\r\n    \r\n      ... your code ...\r\n      \r\n    };\r\n\r\n  - `options{}` an object containing settings for ftpsync.\r\n\r\n*See [ftpsync.settings{}](#ftpsyncsettings) for detailed info about the settings.*\r\n\r\n#### ftpsync.settings{}\r\n\r\nContains the application settings for ftpsync.\r\n\r\n  - `host` - hostname/address of the remote ftp server (required).\r\n  - `port` - port of the remote ftp server (default `21`).\r\n  - `user` - ftp username (required).\r\n  - `pass` - ftp password (required).\r\n  - `local` - the root directory of the local host (default `'./'`).\r\n  - `remote` - the root path of the remote server (default `'./'`).\r\n  - `connections` - the max number of concurrent ftp connections (default `1`).\r\n  - `ignore` - the list of file patterns to ignore.\r\n\r\n*Note: Ignore patterns can be defined as a filename, file path, or glob match.*\r\n\r\n#### ftpsync.local{}\r\n\r\nThe file and directory listings for the local host.\r\n\r\n- `ftpsync.local.dirs` - contains a simple list.\r\n\r\nEach path represents a local directory.\r\n\r\n- `ftpsync.local.files` - contains a list of objects.\r\n\r\nEach object in the list represents a file and contains a `id`, `size`, and `time` attribute with the requisite values for that file.\r\n\r\nPopulated by running `collect()` or `utils.walkLocal()`.\r\n\r\n#### ftpsync.remote{}\r\n\r\nThe file and directory listings for the remote host.\r\n\r\n- `ftpsync.remote.dirs` - contains a simple list.\r\n\r\nEach path represents a remote directory.\r\n\r\n- `ftpsync.remote.files` - contains a list of objects.\r\n\r\nEach object in the list represents a file and contains a `id`, `size`, and `time` attribute with the requisite values for that file.\r\n\r\nPopulated by running `collect()` or `utils.walkremote()`.\r\n\r\n#### ftpsync.mkdir[]\r\n\r\nThe list of directories queued for creation on the remote server.\r\n\r\nPopulated by running `consolidate()`.\r\n\r\n#### ftpsync.rmdir[]\r\n\r\nThe list of directories queued for deletion on the remote server.\r\n\r\nPopulated by running `consolidate()`.\r\n\r\n#### ftpsync.add[]\r\n\r\nThe list of files queued to for addition to the remote server.\r\n\r\nPopulated by running `consolidate()`.\r\n\r\n#### ftpsync.update[]\r\n\r\nThe list of files queued for update on the remote server.\r\n\r\nPopulated by running `consolidate()`.\r\n\r\n#### ftpsync.remove[]\r\n\r\nThe list of files queued for removal from the remote server.\r\n\r\nPopulated by running `consolidate()`.\r\n\r\n### Methods\r\n\r\n#### ftpsync.run(callback)\r\n\r\nCompletes the full synchronization from start to finish. Runs `setup()`, `collect()`, `consolidate()`, `commit()`, and `validate()`.\r\n\r\n#### ftpsync.setup(callback)\r\n\r\nThe initialization step of the sunchronization process. This function accomplishes two tasks, First, it checks to see that all the required settings are present. Second, it synchronizes the local host and remote server clocks.\r\n\r\n*The setup will fail if the following settings aren't defined:*\r\n\r\n  - `host`\r\n  - `port`\r\n  - `user`\r\n  - `pass`\r\n\r\n*See [ftpsync.settings{}](#ftpsyncsettings) for detailed info about the settings.*\r\n\r\n#### ftpsync.collect(callback)\r\n\r\nWalks the file trees for both the local host and remote server and prepares them for further processing. The resulting file lists are stored in `local[]`, and `remote[]` upon successful completion.\r\n\r\n#### ftpsync.consolidate(callback)\r\n\r\nRuns comparisons on the local and remote file listings. Files that exist in the local directory are but not the remote are queued up for addition. Files that exist in both but are different (determined by file size and time stamp) are queued for update. Files that exist in on the remote directory but not the local are queued for removal. The resulting queues can be found in `add[]`, `update[]`, and `remove[]` upon successful completion.\r\n\r\n#### ftpsync.commit(callback)\r\n\r\nExecutes the tasks contained in the `add[]`, `update[]`, and `remove[]` lists.\r\n\r\n### Helper Methods\r\n\r\n#### ftpsync.utils.walkLocal(dir, callback)\r\n\r\nWalks the local directory tree and returns a list of files.\r\n\r\n*Requires `setup()` to be run first.*\r\n\r\n#### ftpsync.utils.walkRemote(dir, callback)\r\n\r\nWalks the remote directory tree and returns a list of files.\r\n\r\n*Requires `setup()` to be run first.*\r\n\r\nInstallation\r\n------------\r\n\r\n    npm install -g ftpsync\r\n\r\n*The -g flag indicates that this package will be installed globally. If you'd like to install it directly to a file locally simply remove the flag.*\r\n\r\nRoadmap\r\n-------\r\n### Short Term\r\n - Implement timestamp file comparisons on updates\r\n\r\n### Long Term\r\n - Pull functionality\r\n - Two-way sync\r\n\r\n### Pipe Dream\r\n - Comprehensive testing - Requires a non-sucky ftp server implementation written in node.\r\n\r\nLicense\r\n-------\r\n\r\nMIT. See LICENSE.\r\n","google":"UA-72843368-1","note":"Don't delete this file! It's used internally to help with page regeneration."}